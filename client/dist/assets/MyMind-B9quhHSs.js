import{t as p,b as i,j as e,M as h,B as g}from"./index-C-3fXsNk.js";import{t as f}from"./timeFormat-BEZOty4m.js";const b=async()=>{try{return(await p.get("/admin/my-mind",{},{withCredentials:!0})).data}catch(a){return a}},w=async(a,r)=>{try{return(await p.put(`/admin/my-mind/${r}`,a,{withCredentials:!0})).data}catch(t){return t}},M=async a=>{try{return(await p.post("/admin/my-mind",a,{withCredentials:!0})).data}catch(r){return r}},v=async a=>{try{return(await p.delete(`/admin/my-mind/${a}`,{},{withCredentials:!0})).data}catch(r){return r}};function C({setOpenModal:a,openModal:r,mindDetails:t}){const[n,d]=i.useState({name:"",content:""});i.useEffect(()=>{console.log(t),t&&d({name:(t==null?void 0:t.name)||"",content:(t==null?void 0:t.content)||""})},[t]);const x=o=>{const{name:u,value:y}=o.target;d(j=>({...j,[u]:y}))},l=async()=>{const o=await w(n,t==null?void 0:t._id);o.success===!0&&(g.success(o.message),n.name="",n.content="",a(!1))};return e.jsx(e.Fragment,{children:e.jsxs(h,{show:r,onClose:()=>a(!1),children:[e.jsx(h.Header,{className:"bg-gray-800",children:e.jsx("h1",{className:"text-white font-bold",children:"Add New Mind"})}),e.jsxs(h.Body,{className:"ring-1 bg-background rounded-b-md px-2 py-2",children:[e.jsx("div",{className:"w-full",children:e.jsxs("label",{htmlFor:"",children:[e.jsx("h1",{className:"text-white py-2",children:"Name of the Mind"}),e.jsx("input",{type:"text",className:"w-full rounded-md bg-gray-700 text-text",value:n==null?void 0:n.name,onChange:x,name:"name"})]})}),e.jsx("div",{className:"w-full mt-3",children:e.jsxs("label",{htmlFor:"",children:[e.jsx("h1",{className:"text-text py-2",children:"Provide the Mind Description"}),e.jsx("textarea",{name:"content",value:n==null?void 0:n.content,onChange:x,id:"",rows:8,className:"w-full rounded-md bg-gray-700 text-white"})]})}),e.jsx("button",{className:"text-primary border-2 px-5 py-1 hover:bg-primary hover:text-black rounded-md float-end",onClick:l,children:"Update"})]})]})})}function E({setOpenModal:a,openModal:r}){const[t,n]=i.useState({name:"",content:""}),d=l=>{const{name:o,value:u}=l.target;n({...t,[o]:u})},x=async()=>{if(!(!t.name||!t.content))try{const l=await M(t);l.success===!0&&(t.name="",t.content="",g.success(l.message),a(!1))}catch(l){console.log("Error occurred",l)}};return e.jsx(e.Fragment,{children:e.jsxs(h,{show:r,onClose:()=>a(!1),children:[e.jsx(h.Header,{className:"bg-gray-800",children:e.jsx("h1",{className:"text-white font-bold",children:"Add New Mind"})}),e.jsxs(h.Body,{className:"ring-1 bg-background rounded-b-md px-2 py-2",children:[e.jsx("div",{className:"w-full",children:e.jsxs("label",{htmlFor:"",children:[e.jsx("h1",{className:"text-white py-2",children:"Name of the Mind"}),e.jsx("input",{type:"text",className:"w-full rounded-md bg-gray-700 text-text",value:t.name,onChange:d,name:"name"})]})}),e.jsx("div",{className:"w-full mt-3",children:e.jsxs("label",{htmlFor:"",children:[e.jsx("h1",{className:"text-text py-2",children:"Provide the Mind Description"}),e.jsx("textarea",{name:"content",value:t.content,onChange:d,id:"",rows:8,className:"w-full rounded-md bg-gray-700 text-white"})]})}),e.jsx("button",{className:"text-primary border-2 px-5 py-1 hover:bg-primary hover:text-black rounded-md float-end",onClick:x,children:"Add Mind"})]})]})})}function A(){const[a,r]=i.useState(!1),[t,n]=i.useState([]),[d,x]=i.useState(),[l,o]=i.useState(!1),u=()=>{r(!0)},y=s=>{o(!0);const c=t.find(m=>(m==null?void 0:m._id)===s);console.log(c),x(c)};i.useEffect(()=>{(async()=>{const c=await b();c.success===!0&&(console.log(c.contents),n(c.contents))})()},[r,o,a,l,n,x]);const j=async s=>{const c=await v(s);c.success===!0&&(n(m=>m.filter(N=>N._id!==s)),g.success(c.message))};return e.jsxs(e.Fragment,{children:[e.jsx(C,{setOpenModal:o,openModal:l,mindDetails:d||null}),e.jsx(E,{setOpenModal:r,openModal:a}),e.jsx("div",{className:"h-full bg-background",children:e.jsxs("div",{className:"col-span-9",children:[e.jsxs("div",{className:"text-text flex justify-between",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-2xl py-12",children:"Mind Management"})}),e.jsx("div",{className:"px-8",children:e.jsx("button",{className:"text-xl py-12 text-pretty text-primary",onClick:u,children:"Create"})})]}),e.jsx("div",{children:e.jsx(e.Fragment,{children:e.jsxs("table",{className:"w-full text-sm text-left rtl:text-right rounded",children:[e.jsx("thead",{className:"text-xs bg-secondary rounded",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-primary",children:"No"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-primary",children:"Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-primary",children:"Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-primary text-center",children:"Edit or Delete"})]})}),t.map((s,c)=>e.jsx(e.Fragment,{children:e.jsx("tbody",{className:"text-text",children:e.jsxs("tr",{className:"border-b border-gray-500",children:[e.jsx("th",{scope:"row",className:"px-6 py-4 font-medium",children:c+1}),e.jsx("td",{className:"px-6 py-4",children:s==null?void 0:s.name}),e.jsx("td",{className:"px-6 py-4",children:f(s==null?void 0:s.createdAt)}),e.jsxs("td",{className:"px-6 py-4 flex justify-center",children:[e.jsx("button",{className:"border py-1 px-6 rounded hover:bg-green-500",onClick:()=>y(s==null?void 0:s._id),children:"Edit"}),e.jsx("button",{className:"border py-1 px-6 rounded ml-2 hover:bg-red-700",onClick:()=>j(s==null?void 0:s._id),children:"Delete"})]})]})},c)}))]})})})]})})]})}export{A as default};
