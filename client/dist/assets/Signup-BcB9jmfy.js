import{b as r,j as e,M as y,d as O,T as P,v as R,B as N,e as S,P as x,f as F,g as M,u as q,s as D,h as L,k as I,L as B}from"./index-C-3fXsNk.js";import{v as d}from"./formValidator-Jzx2fgUq.js";function E({setOpenModal:f,openModal:h,email:l,isSubmit:g,setFormSubmit:m}){const[c,v]=r.useState(""),[u,n]=r.useState(""),[o,p]=r.useState(60);let b;r.useEffect(()=>(o>0&&g&&(b=setInterval(()=>{p(o-1)},1e3)),()=>{clearInterval(b)}));const s=a=>{a.preventDefault(),c.trim().length>0&&async function(){try{const t=await R(l,c);t.success?(N.success(t.message),n(""),f(!1),m(!0)):n(t.message)}catch(t){n(t.response.message)}}()},j=a=>{a.preventDefault(),o===0&&async function(){try{const t=await S(l);p(60),t.success&&N.success(t.message)}catch(t){n(t.message)}}()};return e.jsx(e.Fragment,{children:e.jsxs(y,{show:h,size:"sm",onClose:()=>f(!1),popup:!0,children:[e.jsx(y.Header,{}),e.jsx(y.Body,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-xl text-center font-medium text-gray-900 dark:text-white",children:["Enter the OTP sent to ",l.split("@")[0].slice(0,4),"********@",l.split("@")[1]]}),e.jsxs("div",{children:[u&&e.jsx("div",{className:"w-full bg-red-100 text-center rounded-sm",children:e.jsxs("small",{className:"py- text-red-600",children:[u," "]})}),e.jsx("div",{className:"mb-2 block",children:e.jsx(O,{htmlFor:"email",value:"Enter OTP"})}),e.jsx(P,{value:c,onChange:a=>v(a.target.value),id:"number",placeholder:"eg:456436"})]}),e.jsx("button",{onClick:s,className:"bg-secondary w-full py-2 rounded-md text-white font-medium",children:"Submit"}),e.jsx("div",{children:o>0?e.jsxs("span",{className:"font-semibold text-gray-600",children:["Resend OTP within"," ",e.jsxs("span",{className:"font-bold text-blue-500",children:[o,"s"]})]}):e.jsx("span",{className:"text-blue-500 font-semibold cursor-pointer",onClick:j,children:"Resend OTP"})})]})})]})})}E.propTypes={setOpenModal:x.func.isRequired,openModal:x.bool.isRequired,email:x.string.isRequired,isSubmit:x.bool.isRequired,setFormSubmit:x.func.isRequired};function H(){const{isLoading:f,isSuccess:h}=F(i=>i.auth),l=M(),g=q(),[m,c]=r.useState(!1),[v,u]=r.useState(!1),[n,o]=r.useState(!1),[p,b]=r.useState(""),[s,j]=r.useState({fullname:"",email:"",password:""}),[a,t]=r.useState({fullname:"",email:"",password:""}),k=()=>{t({...a,fullname:d("name",s.fullname),email:d("email",s.email),password:d("password",s.password)}),c(!0)},w=i=>{const{name:T,value:C}=i.target;j({...s,[T]:C}),s.fullname&&t({...a,fullname:d("name",s.fullname)}),s.email&&t({...a,email:d("email",s.email)}),s.password&&t({...a,password:d("password",s.password)})};return r.useEffect(()=>{(async function(){if(m&&!a.email&&!a.fullname&&!a.password&&s.fullname&&s.email&&s.password){const i=await S(s.email);i.success?u(!0):b(i.response.data.message),console.log(i)}})()},[s,a,m]),r.useEffect(()=>{n&&l(D(s))},[n,l,s]),r.useEffect(()=>{h&&(l(L()),o(!1),c(!1),window.location.reload())},[l,h,g]),f?e.jsx(I,{}):e.jsxs(e.Fragment,{children:[e.jsx(E,{email:s.email,openModal:v,setOpenModal:u,isSubmit:m,setFormSubmit:o}),e.jsx("div",{className:"min-h-screen pt-28 md:pt-14 pb-56 md:pb-40 bg-gradient-to-r from-[#2d1525] to-background flex flex-col justify-center ",children:e.jsxs("div",{className:"relative py-3 sm:max-w-xl sm:mx-auto",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-secondary to-primary shadow-lg transform -skew-y-6 sm:skew-y-0 sm:-rotate-6 sm:rounded-3xl"}),e.jsx("div",{className:"relative md:w-[30rem] bg-text shadow-lg rounded-3xl p-10",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-2xl font-semibold",children:"Signup"})}),p&&e.jsx("div",{className:"w-full bg-red-200 flex items-center justify-center p-1 mt-3 rounded-md text-red-600",children:e.jsx("small",{className:"",children:p})}),e.jsx("div",{className:"divide-y divide-gray-200",children:e.jsxs("div",{className:"py-4 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{name:"fullname",type:"text",value:s.fullname,onChange:w,className:"peer placeholder-transparent outline-none h-10 w-full bg-text border-0 border-b-2 border-gray-300 text-gray-900 focus:outline-none focus:border-b-2 focus:ring-0",placeholder:"Email address"}),a.fullname&&e.jsx("small",{className:"text-red-700",children:a.fullname}),e.jsx("label",{className:"absolute left-0 -top-3.5 text-gray-600 text-sm peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-440 peer-placeholder-shown:top-2 transition-all peer-focus:-top-3.5 peer-focus:text-gray-600 peer-focus:text-sm",children:"Name"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{name:"email",type:"text",value:s.email,onChange:w,className:"peer placeholder-transparent outline-none h-10 w-full bg-text border-0 border-b-2 border-gray-300 text-gray-900 focus:outline-none focus:border-b-2 focus:ring-0",placeholder:"Email address"}),a.email&&e.jsx("small",{className:"text-red-700",children:a.email}),e.jsx("label",{className:"absolute left-0 -top-3.5 text-gray-600 text-sm peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-440 peer-placeholder-shown:top-2 transition-all peer-focus:-top-3.5 peer-focus:text-gray-600 peer-focus:text-sm",children:"Email"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{name:"password",type:"password",value:s.password,onChange:w,className:"peer placeholder-transparent outline-none h-10 w-full border-b-2 bg-text border-0 border-gray-300 text-gray-900 focus:outline-none focus:border-b-2 focus:ring-0",placeholder:"Password"}),a.password&&e.jsx("small",{className:"text-red-700",children:a.password}),e.jsx("label",{className:"absolute left-0 -top-3.5 text-gray-600 text-sm peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-440 peer-placeholder-shown:top-2 transition-all peer-focus:-top-3.5 peer-focus:text-gray-600 peer-focus:text-sm",children:"Password"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:k,className:"bg-secondary mt-3 mb-2 text-white rounded-md w-full py-1",children:"Submit"}),e.jsx(B,{to:"/login",children:e.jsx("small",{className:"text-blue-500 cursor-pointer hover:underline",children:"Already have account?"})})]})]})})]})})]})})]})}export{H as default};
