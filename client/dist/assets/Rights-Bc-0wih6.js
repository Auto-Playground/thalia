import{t as y,b as d,j as e,M as h,B as f,S as R,m as E}from"./index-C-3fXsNk.js";import{t as F}from"./timeFormat-BEZOty4m.js";const M=async n=>{try{return(await y.post("/admin/rights",n,{withCredentials:!0})).data}catch(a){return a}},k=async(n,a)=>{try{return(await y.put(`/admin/rights/${a}`,n,{withCredentials:!0})).data}catch(t){return t}},S=async n=>{try{return(await y.get(`/admin/rights?page=${n}`,{},{withCredentials:!0})).data}catch(a){return a}},P=async n=>{try{return(await y.delete(`/admin/rights/${n}`,{},{withCredentials:!0})).data}catch(a){return a}};function A({setOpenModal:n,openModal:a}){const[t,r]=d.useState({name:"",content:""}),i=c=>{const{name:o,value:m}=c.target;r({...t,[o]:m})},x=async()=>{if(!t.name||!t.content){console.log("Data fields Missing");return}try{const c=await M(t);c.success===!0&&(t.name="",t.content="",f.success(c.message),n(!1))}catch(c){console.log("Error occurred",c)}};return e.jsx(e.Fragment,{children:e.jsxs(h,{show:a,onClose:()=>n(!1),children:[e.jsx(h.Header,{className:"bg-gray-800",children:e.jsx("h1",{className:"text-white font-bold",children:"Add New Right"})}),e.jsxs(h.Body,{className:"ring-1 bg-background rounded-b-md px-2 py-2",children:[e.jsx("div",{className:"w-full",children:e.jsxs("label",{htmlFor:"",children:[e.jsx("h1",{className:"text-white py-2",children:"Name of the Right"}),e.jsx("input",{type:"text",className:"w-full rounded-md bg-gray-700 text-text",value:t.name,onChange:i,name:"name"})]})}),e.jsx("div",{className:"w-full mt-3",children:e.jsxs("label",{htmlFor:"",children:[e.jsx("h1",{className:"text-text py-2",children:"Provide the Right Description"}),e.jsx("textarea",{name:"content",value:t.content,onChange:i,id:"",rows:8,className:"w-full rounded-md bg-gray-700 text-white"})]})}),e.jsx("button",{className:"text-primary border-2 px-5 py-1 hover:bg-primary hover:text-black rounded-md float-end",onClick:x,children:"Add Right"})]})]})})}function B({setOpenModal:n,openModal:a,rightDetails:t}){const[r,i]=d.useState({name:"",content:""});d.useEffect(()=>{t&&i({name:(t==null?void 0:t.name)||"",content:(t==null?void 0:t.content)||""})},[t]);const x=o=>{const{name:m,value:j}=o.target;i(p=>({...p,[m]:j}))},c=async()=>{const o=await k(r,t==null?void 0:t._id);o.success===!0&&(f.success(o.message),r.name="",r.content="",n(!1))};return e.jsx(e.Fragment,{children:e.jsxs(h,{show:a,onClose:()=>n(!1),children:[e.jsx(h.Header,{className:"bg-gray-800",children:e.jsx("h1",{className:"text-white font-bold",children:"Add New Right"})}),e.jsxs(h.Body,{className:"ring-1 bg-background rounded-b-md px-2 py-2",children:[e.jsx("div",{className:"w-full",children:e.jsxs("label",{htmlFor:"",children:[e.jsx("h1",{className:"text-white py-2",children:"Name of the Right"}),e.jsx("input",{type:"text",className:"w-full rounded-md bg-gray-700 text-text",value:r==null?void 0:r.name,onChange:x,name:"name"})]})}),e.jsx("div",{className:"w-full mt-3",children:e.jsxs("label",{htmlFor:"",children:[e.jsx("h1",{className:"text-text py-2",children:"Provide the Right Description"}),e.jsx("textarea",{name:"content",value:r==null?void 0:r.content,onChange:x,id:"",rows:8,className:"w-full rounded-md bg-gray-700 text-white"})]})}),e.jsx("button",{className:"text-primary border-2 px-5 py-1 hover:bg-primary hover:text-black rounded-md float-end",onClick:c,children:"Update"})]})]})})}function H(){const[n,a]=d.useState(!1),[t,r]=d.useState([]),[i,x]=d.useState(),[c,o]=d.useState(!1),[m,j]=d.useState(1),[p,N]=d.useState(0),g=s=>j(s),b=()=>{a(!0)},w=s=>{o(!0);const l=t.find(u=>(u==null?void 0:u._id)===s);x(l)};d.useEffect(()=>{(async()=>{const l=await S(m);l.success&&(r(l.rights),N(l.count))})()},[a,o,n,c,r,x,m]);const v=async s=>{const l=await P(s);l.success===!0&&(r(u=>u.filter(C=>C._id!==s)),f.success(l.message))};return e.jsxs(e.Fragment,{children:[e.jsx(B,{setOpenModal:o,openModal:c,rightDetails:i||null}),e.jsx(A,{setOpenModal:a,openModal:n}),e.jsx("div",{className:"h-full bg-background",children:e.jsxs("div",{className:"col-span-9",children:[e.jsxs("div",{className:"text-text flex justify-between",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-2xl py-12",children:"My Rights"})}),e.jsx("div",{className:"px-8",children:e.jsx("button",{className:"text-xl py-12 text-pretty text-primary",onClick:b,children:"Create"})})]}),e.jsxs("div",{children:[e.jsxs("table",{className:"w-full text-sm text-left rtl:text-right rounded",children:[e.jsx("thead",{className:"text-xs bg-secondary rounded",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-primary",children:"No"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-primary",children:"Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-primary",children:"Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-primary text-center",children:"Edit or Delete"})]})}),t.map((s,l)=>e.jsx(e.Fragment,{children:e.jsx("tbody",{className:"text-text",children:e.jsxs("tr",{className:"border-b border-gray-600",children:[e.jsx("th",{scope:"row",className:"px-6 py-4 font-medium",children:l+1}),e.jsx("td",{className:"px-6 py-4",children:s==null?void 0:s.name}),e.jsx("td",{className:"px-6 py-4",children:F(s==null?void 0:s.createdAt)}),e.jsxs("td",{className:"px-6 py-4 flex justify-center",children:[e.jsx("button",{className:"border py-1 px-6 rounded hover:bg-green-500",onClick:()=>w(s==null?void 0:s._id),children:"Edit"}),e.jsx("button",{className:"border py-1 px-6 rounded ml-2 hover:bg-red-700",onClick:()=>{R.fire({title:"Are you sure",text:"are you sure wan't to delete this",showCancelButton:!0,confirmButtonText:"delete"}).then(u=>{u.isConfirmed&&v(s==null?void 0:s._id)})},children:"Delete"})]})]})},l)}))]}),e.jsx("div",{className:"flex z-20 mypage overflow-x-auto w-[80%] sm:justify-end",children:p>0&&e.jsx(E,{currentPage:m,totalPages:Math.ceil(p/10),onPageChange:g})})]})]})})]})}export{H as default};
